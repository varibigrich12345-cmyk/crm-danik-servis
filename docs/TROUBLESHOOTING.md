# Решение проблем

## Частые ошибки

### "Не удалось определить пользователя"
**Причина:** profile не загружается или равен null  
**Решение:**
1. Проверь что пользователь есть в profiles таблице
2. Проверь что RLS отключен: `ALTER TABLE profiles DISABLE ROW LEVEL SECURITY;`
3. Перелогинься в приложении

### 406 Not Acceptable
**Причина:** RLS блокирует доступ или .single() не находит запись  
**Решение:**
1. Замени .single() на .maybeSingle()
2. Отключи RLS: `ALTER TABLE имя_таблицы DISABLE ROW LEVEL SECURITY;`

### Бесконечная загрузка
**Причина:** useEffect без зависимостей или бесконечный цикл  
**Решение:**
1. Проверь что useEffect имеет [], []) в конце
2. Проверь что нет setState без if (!mounted) return

### Браузер виснет
**Причина:** бесконечный цикл рендеринга  
**Решение:**
1. Открой консоль F12 и смотри логи
2. Восстанови useAuth.ts из бэкапа: docs/backups/useAuth.backup.ts

## Как откатить изменения
```bash
# Откатить один файл
git checkout -- src/hooks/useAuth.ts

# Откатить всё до последнего коммита
git reset --hard HEAD

# Посмотреть историю
git log --oneline
```

